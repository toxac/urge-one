---
import { Icon } from 'astro-icon/components';

interface Props {
  type: string;
  icon: string;
  label: string;
}
const { type, icon, label } = Astro.props;

const badgeColors = {
  milestone: 'from-yellow-400 via-yellow-300 to-yellow-500 text-yellow-900',
  challenge: 'from-orange-400 via-orange-500 to-orange-600 text-orange-900',
  contribution: 'from-pink-400 via-pink-500 to-pink-600 text-pink-900',
  activity: 'from-purple-500 via-purple-600 to-purple-700 text-purple-200'
};
---

<style>
.ribbon {
  position: absolute;
  /* Position at 2/3 of the badge height, assuming badge height ~80px */
  top: calc(66% - 1.25rem); /* -1.25rem for adjustment */
  left: 50%;
  transform: translateX(-50%);
  padding: 0.1rem 1rem;
  background: rgba(0,0,0,0.6);
  border-radius: 0.25rem;
  font-weight: 600;
  font-size: 0.75rem;
  text-transform: uppercase;
  box-shadow: 0 1px 2px rgba(0,0,0,0.3);
  color: white;
  pointer-events: none;
  width: max-content;
  white-space: nowrap;
  user-select: none;
  z-index: 20; /* Higher Z-Index */
}
.badge-wrapper:hover .ribbon {
  background: rgba(0,0,0,0.8);
  box-shadow: 0 3px 7px rgba(0,0,0,0.4);
}
</style>

<div class={`relative w-20 h-28 mx-4 badge-wrapper cursor-default select-none`}>
  <div 
    class={`mask mask-hexagon w-20 h-20 relative flex items-center justify-center bg-gradient-to-br ${badgeColors[type]} shadow-lg`}
  >
    <div class="w-12 h-12 rounded-full bg-white flex items-center justify-center shadow-md">
      <Icon name={icon} class="text-3xl text-current drop-shadow-md" />
    </div>
  </div>
  <div class="ribbon">{label}</div>
</div>
