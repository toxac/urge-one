---
import DashLayout from "../layouts/DashLayout.astro";
import { hasAccess, accessProfiles } from "../lib/rbac";
import OpportunitiesList from "../components/user/assets/OpportunityListModed";
import Badge from "../components/program/Badge.astro";

// CHECK AUTHENTICATION AND ACCESS
const { userRoles, session } = Astro.locals;

const isAuthenticated: boolean = session !== null;

const hasPageAccess: boolean = hasAccess(
  userRoles,
  accessProfiles.programStart
);

// redirect if doesnt have access
if (!isAuthenticated || !hasPageAccess) {
  return Astro.redirect("/program");
}



// BREADCRUMBS
const breadcrumbs = [
  { name: "Home", url: "/" },
  { name: "Test", url: "/test" },

];
---

<DashLayout
  title="milestones | urge-start"
  description="milestones in urge start program"
  breadcrumbItems={breadcrumbs}
>
<Badge label="test" icon="mdi:plus" type="milestone" />

<OpportunitiesList mode="editAssessment" client:load  />
 
</DashLayout>
